{"ast":null,"code":"var _jsxFileName = \"/Users/victorzenteno/Documents/ReactTraining/Lab3/react-advanced-lab-starter/src/pages/account/Register.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Section, Row, Col, TextInput, Icon, Button } from 'react-materialize';\nimport { Redirect, Route, useHistory } from \"react-router-dom\";\nimport axios from 'axios';\nexport default function Register() {\n  const initialFormData = Object.freeze({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    password2: \"\"\n  });\n  const history = useHistory();\n  const [formData, updateFormData] = useState(initialFormData);\n  const [message, setMessage] = useState([]);\n\n  const handleChange = e => {\n    updateFormData({ ...formData,\n      // Trimming any whitespace\n      [e.target.name]: e.target.value.trim()\n    });\n  };\n\n  const setErrorMessage = err => {\n    setMessage(err);\n  };\n\n  const validateEmail = email => {\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(email);\n  };\n\n  const onRegisterClick = e => {\n    e.preventDefault(); // I know this kind of validations can be done through binding, I'll keep it simple for time and maybe a v2 release.\n\n    if (formData.password !== formData.password2) {\n      setErrorMessage('Password does not match.');\n      return;\n    }\n\n    if (!validateEmail(formData.email)) {\n      setErrorMessage('Email is not properly formatted.');\n      return;\n    }\n\n    axios.post('http://localhost:5000/api/users/register', formData, {\n      headers: {}\n    }).then(function (response) {\n      history.push(\"/login\");\n    }).catch(async function (error) {\n      debugger;\n      let data;\n      data = await error.response.data;\n      setErrorMessage(data);\n    });\n  };\n\n  useEffect(() => {\n    setErrorMessage();\n  }, []);\n  return /*#__PURE__*/React.createElement(Route, {\n    render: props => localStorage.getItem('token') ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }) : /*#__PURE__*/React.createElement(Section, {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      s: 12,\n      m: 4,\n      xl: 4,\n      offset: \"m4 xl4\",\n      className: \"z-depth-4 card-panel border-radius-6 register-card bg-opacity-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"register-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"header center-align\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }\n    }, \"Register\")), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextInput, {\n      id: \"name\",\n      name: \"name\",\n      icon: /*#__PURE__*/React.createElement(Icon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 23\n        }\n      }, \"account_circle\"),\n      onChange: handleChange,\n      label: \"name\",\n      s: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextInput, {\n      id: \"email\",\n      name: \"email\",\n      icon: /*#__PURE__*/React.createElement(Icon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 23\n        }\n      }, \"email\"),\n      onChange: handleChange,\n      label: \"Email\",\n      s: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextInput, {\n      id: \"password\",\n      name: \"password\",\n      type: \"password\",\n      icon: /*#__PURE__*/React.createElement(Icon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 23\n        }\n      }, \"lock_outline\"),\n      onChange: handleChange,\n      label: \"Password\",\n      s: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextInput, {\n      id: \"password2\",\n      name: \"password2\",\n      type: \"password\",\n      icon: /*#__PURE__*/React.createElement(Icon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 23\n        }\n      }, \"lock_outline\"),\n      onChange: handleChange,\n      label: \"Password\",\n      s: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      s: 12,\n      className: \"input-field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      waves: \"light\",\n      className: \"col s12\",\n      onClick: onRegisterClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, \"Register\"))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      s: 12,\n      className: \"error-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, message))))))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 3\n    }\n  });\n}","map":{"version":3,"sources":["/Users/victorzenteno/Documents/ReactTraining/Lab3/react-advanced-lab-starter/src/pages/account/Register.js"],"names":["React","useEffect","useState","Section","Row","Col","TextInput","Icon","Button","Redirect","Route","useHistory","axios","Register","initialFormData","Object","freeze","name","email","password","password2","history","formData","updateFormData","message","setMessage","handleChange","e","target","value","trim","setErrorMessage","err","validateEmail","re","test","onRegisterClick","preventDefault","post","headers","then","response","push","catch","error","data","props","localStorage","getItem","color"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { Section, Row, Col, TextInput, Icon, Button } from 'react-materialize';\nimport { Redirect, Route, useHistory } from \"react-router-dom\";\nimport axios from 'axios';\n\nexport default function Register() {\nconst initialFormData = Object.freeze({\n  name: \"\",\n  email: \"\",\n  password: \"\",\n  password2: \"\"\n});\nconst history = useHistory();\nconst [formData, updateFormData] = useState(initialFormData);\nconst [message, setMessage] = useState([]);\n\nconst handleChange = (e) => {\n  updateFormData({\n    ...formData,\n    // Trimming any whitespace\n    [e.target.name]: e.target.value.trim()\n  });\n};\nconst setErrorMessage = (err) => {\n  setMessage(err);\n};\nconst validateEmail = (email) => {\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(email);\n};\nconst onRegisterClick = (e) => {\n  e.preventDefault()\n  // I know this kind of validations can be done through binding, I'll keep it simple for time and maybe a v2 release.\n  if (formData.password !== formData.password2) {\n    setErrorMessage('Password does not match.');\n    return;\n  }\n  if (!validateEmail(formData.email)) {\n    setErrorMessage('Email is not properly formatted.');\n    return;\n  }\n  axios.post('http://localhost:5000/api/users/register', formData, {\n    headers:  {}\n  }).then(function (response) {\n    history.push(\"/login\");\n  })\n  .catch(async function (error) {\n    debugger;\n    let data;\n    data = await error.response.data;\n    setErrorMessage(data);\n  });\n};\n\nuseEffect(() => {\n  setErrorMessage();\n}, []); \n\n  return (\n  <Route render={props => (\n    localStorage.getItem('token') ?\n        <Redirect to=\"/dashboard\" />\n    : <Section className=\"container\">\n      <Row>\n        <Col\n          s={12}\n          m={4}\n          xl={4}\n          offset=\"m4 xl4\"\n          className=\"z-depth-4 card-panel border-radius-6 register-card bg-opacity-8\"\n        >\n          <div className=\"register-form\">\n            <Row>\n              <h4 className=\"header center-align\">Register</h4>\n            </Row>\n            <Row>\n              <TextInput\n                id=\"name\"\n                name=\"name\"\n                icon={<Icon>account_circle</Icon>}\n                onChange={handleChange}\n                label=\"name\"\n                s={12}\n              />\n            </Row>\n            <Row>\n              <TextInput\n                id=\"email\"\n                name=\"email\"\n                icon={<Icon>email</Icon>}\n                onChange={handleChange}\n                label=\"Email\"\n                s={12}\n              />\n            </Row>\n            <Row>\n              <TextInput\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                icon={<Icon>lock_outline</Icon>}\n                onChange={handleChange}\n                label=\"Password\"\n                s={12}\n              />\n            </Row>\n            <Row>\n              <TextInput\n                id=\"password2\"\n                name=\"password2\"\n                type=\"password\"\n                icon={<Icon>lock_outline</Icon>}\n                onChange={handleChange}\n                label=\"Password\"\n                s={12}\n              />\n            </Row>\n            <Row>\n              <Col s={12} className=\"input-field\">\n                <Button\n                  waves=\"light\"\n                  className=\"col s12\"\n                  onClick={onRegisterClick}\n                >\n                  Register\n                </Button>\n              </Col>\n            </Row>\n            <Row>\n              <Col s={12} className=\"error-message\">\n                <span style={{color: 'red'}}>{message}</span>\n              </Col>\n            </Row>\n          </div>\n        </Col>\n      </Row>\n    </Section>\n    )} />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}